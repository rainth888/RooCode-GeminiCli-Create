# Gemini CLI OAuth Setup Guide

## Overview

The Gemini CLI integration requires Google OAuth credentials to authenticate with the Google Cloud Code Assist API. This guide explains how to set up the necessary credentials.

## Prerequisites

1. A Google Cloud account
2. Access to Google Cloud Console
3. Basic understanding of OAuth 2.0

## Step-by-Step Setup

### 1. Create a Google Cloud Project

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Create a new project or select an existing one
3. Note down your Project ID

### 2. Enable Required APIs

1. In the Google Cloud Console, go to "APIs & Services" > "Library"
2. Search for and enable the following APIs:
   - **Google Cloud Code Assist API**
   - **Google OAuth2 API** (usually enabled by default)

### 3. Create OAuth 2.0 Credentials

1. Go to "APIs & Services" > "Credentials"
2. Click "Create Credentials" > "OAuth 2.0 Client IDs"
3. If prompted, configure the OAuth consent screen first:
   - Choose "External" user type
   - Fill in the required information (App name, User support email, Developer contact information)
   - Add scopes: `https://www.googleapis.com/auth/cloud-platform`
   - Add test users if needed

4. Create the OAuth 2.0 Client ID:
   - Application type: "Desktop application"
   - Name: "Gemini CLI Integration"
   - Click "Create"

5. Note down the **Client ID** and **Client Secret**

### 4. Configure the Application

1. Open the file: `z-geminicli-install/src/api/providers/gemini-cli.ts`
2. Replace the placeholder values:
   ```typescript
   const OAUTH_CLIENT_ID = "YOUR_ACTUAL_CLIENT_ID"
   const OAUTH_CLIENT_SECRET = "YOUR_ACTUAL_CLIENT_SECRET"
   ```

### 5. Set Up OAuth Credentials File

The application expects OAuth credentials to be stored in a JSON file. By default, it looks for:
- `~/.gemini/oauth_creds.json` (Linux/macOS)
- `%USERPROFILE%\.gemini\oauth_creds.json` (Windows)

You can also specify a custom path using the `geminiCliOAuthPath` option.

## Security Notes

⚠️ **Important Security Considerations:**

1. **Never commit real credentials to version control**
   - The current code uses placeholder values
   - Real credentials should be kept private
   - Use environment variables or secure credential storage

2. **Use .gitignore**
   - The project includes a `.gitignore` file that excludes sensitive files
   - Files like `oauth_creds.json`, `*.key`, `*.pem` are automatically ignored

3. **Rotate credentials regularly**
   - Change your OAuth credentials periodically
   - Monitor for any unauthorized usage

## Troubleshooting

### Common Issues

1. **"Invalid client" error**
   - Verify your Client ID and Client Secret are correct
   - Ensure the OAuth consent screen is properly configured

2. **"Redirect URI mismatch" error**
   - The application uses `http://localhost:45289` as the redirect URI
   - Make sure this is added to your OAuth client's authorized redirect URIs

3. **"API not enabled" error**
   - Ensure the Google Cloud Code Assist API is enabled in your project
   - Check that you have the necessary permissions

### Getting Help

If you encounter issues:
1. Check the Google Cloud Console for error messages
2. Verify your project has billing enabled (required for some APIs)
3. Ensure your account has the necessary permissions

## Example Configuration

Here's what your OAuth credentials file should look like:

```json
{
  "access_token": "your_access_token_here",
  "refresh_token": "your_refresh_token_here",
  "token_type": "Bearer",
  "expiry_date": 1234567890000
}
```

**Note**: This file is automatically generated when you first authenticate. You don't need to create it manually.

## Additional Resources

- [Google Cloud Console](https://console.cloud.google.com/)
- [OAuth 2.0 Documentation](https://developers.google.com/identity/protocols/oauth2)
- [Google Cloud Code Assist API Documentation](https://cloud.google.com/code-assist) 